<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Exploring Typed Functional Web Application Part 1</title>

    <!-- reveal js -->
    <link rel="stylesheet" href="../css/reveal.css">
    
    <link rel="stylesheet" href="../css/theme/serif.css" id="theme">
    

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" type="text/css" href="../css/highlighting.css" />

    <!--[if lt IE 9]>
    <script src="../lib/js/html5shiv.js"></script>
    <![endif]-->

  </head>

  <body>
    <div class="reveal">
      <div class="slides">
<section><section id="exploring-typed-functional-web-applications-part-1" class="titleslide slide level1"><h1>Exploring Typed Functional Web Applications Part 1</h1></section><section id="me" class="slide level2">
<h2>Me</h2>
<ul>
<li>This REALLY is an exploration</li>
<li>New to WebDev (started about 6 moths ago)</li>
<li>Haven’t used these specific tools previously
<ul>
<li>PureScript Halogen, Haskell Servant, WebPack</li>
</ul></li>
<li>Stack currently used
<ul>
<li>AngularJS, Haskell Yesod, NodeJS, CoffeeScript, Grunt, Gulp, Heroku</li>
</ul></li>
<li>This talk is a learning experience</li>
</ul>
</section><section id="single-page-web-application" class="slide level2">
<h2>Single Page Web Application</h2>
<ul>
<li>Server and Client</li>
<li>Server
<ul>
<li>serves up client</li>
<li>shared service for clients</li>
<li>“hundreds” of technology options</li>
</ul></li>
<li>Client
<ul>
<li>not simple static pages any more</li>
<li>a lot of logic, state and behaviour</li>
<li>“thousands” of technology options</li>
</ul></li>
</ul>
</section><section id="why-typed-functional" class="slide level2 blah" data-width="8000">
<h2>Why Typed Functional</h2>
<ul>
<li>To be clear - Strongly Statically Typed Functional</li>
<li>I make mistakes
<ul>
<li>so many mistakes</li>
<li>compiler holds my hand</li>
<li>keeps me safe at night</li>
<li>makes up for my deficiencies</li>
</ul></li>
<li>I am power mad
<ul>
<li>good power to weight ratio</li>
<li>express complex things elegantly and correctly</li>
</ul></li>
<li>I wan to be inefficient at WRITING code
<ul>
<li>rather spend more time writing less code
<ul>
<li>less buggy too</li>
</ul></li>
<li>spend more time writing than running code
<ul>
<li>less debugging buggy code</li>
</ul></li>
</ul></li>
</ul>
</section><section id="choices-on-server" class="slide level2">
<h2>Choices on Server</h2>
<ul>
<li>Languages - Haskell or OCaml or ?</li>
<li>Haskell Server Frameworks
<ul>
<li>WAI - Yesod, Scotty, Servant, MFlow, Wheb, Spock</li>
<li>Other - HappStack, Snap</li>
<li>WAI has lots of composable middleware</li>
<li>Servant is WAI and looked really cool</li>
</ul></li>
<li>Haskell tool chain
<ul>
<li>cabal install
<ul>
<li>not really a tool chain</li>
</ul></li>
<li>nix
<ul>
<li>excellent and functional</li>
<li>use for more than just Haskell</li>
<li>doesn’t run everywhere and more buy in</li>
</ul></li>
<li>Stack
<ul>
<li>new kid on the block</li>
<li>easy to use and runs on “everywhere”</li>
</ul></li>
</ul></li>
</ul>
</section><section id="languages-choices-on-client" class="slide level2">
<h2>Languages Choices on Client</h2>
<ul>
<li>Haskell GHCJs</li>
<li>Haskell Haste</li>
<li>Elm</li>
<li>PureScript</li>
<li>or ?</li>
</ul>
</section><section id="haskell-haste" class="slide level2">
<h2>Haskell Haste</h2>
<ul>
<li>Compiles fair amount of Haskell code to JS ✓</li>
<li>Missing some Haskell features ✗</li>
<li>Share code between server client ✓</li>
<li>Needs a runtime ✗ - small though ✓</li>
<li>No real client side frameworks ✗</li>
<li>Integration with other JS a problem ✗</li>
</ul>
</section><section id="haskell-ghcjs" class="slide level2">
<h2>Haskell GHCJs</h2>
<ul>
<li>Compiles most Haskell code to JS ✓</li>
<li>Share code between server client ✓</li>
<li>Needs a large runtime ✗</li>
<li>Has client side frameworks ✓
<ul>
<li>oHm - Om inspired Haskell component MVC</li>
<li>Reflex-Dom - FRP</li>
</ul></li>
<li>Integration with other JS a problem ✗</li>
</ul>
</section><section id="elm" class="slide level2">
<h2>Elm</h2>
<ul>
<li>Haskell inspired ✓</li>
<li>Language based on FRP ✓</li>
<li>Front end first ✓</li>
<li>Client side framework comes with the language (sort off) ✓</li>
<li>Suggested client side architecture not actually FRP more component MVC ?</li>
<li>Integration with other JS easy ✓</li>
<li>Simple ✓, but lacking in power ✗</li>
<li>Can’t share code between server client ✗</li>
</ul>
</section><section id="purescript" class="slide level2">
<h2>PureScript</h2>
<ul>
<li>Haskell like language ✓
<ul>
<li>A lot of the power from Haskell ✓</li>
<li>A lot of the learning curve from Haskell ✗</li>
<li>Some extra goodies - row polymorphism, cleaner class hierarchy ✓</li>
</ul></li>
<li>Is strict not lazy ?</li>
<li>No runtime required ✓</li>
<li>Easy integration with other JS ✓</li>
<li>Has client side frameworks ✓
<ul>
<li>purescript-halogen</li>
<li>purescript-thermite</li>
</ul></li>
</ul>
</section><section id="toolchain-for-client" class="slide level2">
<h2>Toolchain for Client</h2>
<ul>
<li>General JS ➡ Browser JS</li>
<li>Other Assets ➡ Browser Assets ?</li>
<li>You will need Node.js</li>
<li>You will need NPM</li>
<li>You will probably need Bower</li>
<li>Need some combination of the following
<ul>
<li>Browserify, Webpack</li>
<li>Gulp, Grunt</li>
<li>Make, JSPM</li>
<li>probably more</li>
</ul></li>
<li>Picked Webpack - seemed easiest</li>
</ul>
</section><section id="webpack" class="slide level2">
<h2>Webpack</h2>
<ul>
<li>Compiles JS, CSS, images, … into single JS file to serve</li>
<li>Configuration based</li>
<li>Lots of plugins</li>
<li>Dev server with hot reload</li>
<li>Easy to get started</li>
<li>check out SurviveJs book [http://survivejs.com/]</li>
</ul>
</section></section>
<section><section id="server" class="titleslide slide level1"><h1>Server</h1></section><section id="getting-started" class="slide level2">
<h2>Getting started</h2>
<ul>
<li>Was easy</li>
<li>Install stack</li>
<li>run - stack init</li>
<li>add servant-server and other libs to your cabal file</li>
<li>edit your stack.yaml adding “local-bin-path: ../bin”</li>
<li>stack build</li>
<li>ready</li>
</ul>
</section><section id="servant" class="slide level2">
<h2>Servant</h2>
<ul>
<li>Pretty new</li>
<li>Good documentation though</li>
<li>Uses some advanced Haskell
<ul>
<li>needs recent compiler</li>
<li>but still easy to use</li>
</ul></li>
<li>Extremely composable</li>
</ul>
</section><section id="defining-an-api-server-endpoints" class="slide level2">
<h2>Defining an API (server endpoints)</h2>
<ul>
<li>Define your API as type</li>
<li>Compose handlers to satisfy that type</li>
<li>Run your server</li>
</ul>
</section><section id="a-little-echo-server" class="slide level2">
<h2>A little echo server</h2>
<div class="sourceCode" style="margin-left:-40%; width:180%;"><pre class="sourceCode haskell stretch"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">EchoMessage</span> <span class="fu">=</span> <span class="dt">EchoMessage</span> <span class="co">-- The messages we echo</span>
  {<span class="ot"> path      ::</span> <span class="dt">Text</span>          <span class="co">-- The route that was hit</span>
  ,<span class="ot"> message   ::</span> <span class="dt">Text</span>          <span class="co">-- The message to echo</span>
  ,<span class="ot"> timeStamp ::</span> <span class="dt">UTCTime</span>       <span class="co">-- The server side time stamp</span>
  } <span class="kw">deriving</span> (<span class="dt">Show</span>, <span class="dt">Eq</span>, <span class="dt">Generic</span>)
<span class="kw">instance</span> <span class="dt">ToJSON</span> <span class="dt">EchoMessage</span>    <span class="co">-- Turn messages into JSON</span>
<span class="kw">instance</span> <span class="dt">FromJSON</span> <span class="dt">EchoMessage</span>  <span class="co">-- Turn JSON into a message</span>

<span class="co">-- This is our API as a type - all endpoints are returning JSON derived from our type EchoMessage</span>
           <span class="co">-- /echo/path  - capturing no part of the path and no query param</span>
<span class="kw">type</span> <span class="dt">Api</span> <span class="fu">=</span> <span class="st">&quot;echo&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;path&quot;</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[JSON] EchoMessage</span>
           <span class="co">-- /echo/:hello?message=xyz - capturing part of the path naming it as hello and taking a query parameter</span>
         <span class="fu">:&lt;|&gt;</span> <span class="st">&quot;echo&quot;</span> <span class="fu">:&gt;</span> <span class="dt">Capture</span> <span class="st">&quot;hello&quot;</span> <span class="dt">Text</span> <span class="fu">:&gt;</span> <span class="dt">QueryParam</span> <span class="st">&quot;message&quot;</span> <span class="dt">Text</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[JSON] EchoMessage</span>
           <span class="co">-- /echo?message=xyz - capturing no part of the path and taking a query parameter</span>
         <span class="fu">:&lt;|&gt;</span> <span class="st">&quot;echo&quot;</span> <span class="fu">:&gt;</span> <span class="dt">QueryParam</span> <span class="st">&quot;message&quot;</span> <span class="dt">Text</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[JSON] EchoMessage</span>

<span class="co">-- handle /echo/:hello?message=</span>
<span class="ot">echoHello ::</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span> <span class="dt">EchoMessage</span>
echoHello p m <span class="fu">=</span> <span class="dt">EchoMessage</span> (<span class="st">&quot;echo/&quot;</span> <span class="fu">&lt;&gt;</span> p) (<span class="st">&quot;hello your message was \&quot;&quot;</span> <span class="fu">&lt;&gt;</span> fromMaybe <span class="st">&quot;&quot;</span> m <span class="fu">&lt;&gt;</span> <span class="st">&quot;\&quot;&quot;</span>) <span class="fu">&lt;$&gt;</span> liftIO getCurrentTime
<span class="co">-- handle /echo?message=</span>
<span class="ot">echo ::</span> <span class="dt">Maybe</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span> <span class="dt">EchoMessage</span>
echo m <span class="fu">=</span> <span class="dt">EchoMessage</span> <span class="st">&quot;echo&quot;</span> (fromMaybe <span class="st">&quot;&quot;</span> m) <span class="fu">&lt;$&gt;</span> liftIO getCurrentTime
<span class="co">-- handle /echo/path</span>
<span class="ot">echoPath ::</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span> <span class="dt">EchoMessage</span>
echoPath <span class="fu">=</span> <span class="dt">EchoMessage</span> <span class="st">&quot;echo/path&quot;</span> <span class="fu">&lt;$&gt;</span> (T.pack <span class="fu">&lt;$&gt;</span> liftIO getCurrentDirectory) <span class="fu">&lt;*&gt;</span> liftIO getCurrentTime

<span class="ot">api ::</span> <span class="dt">Proxy</span> <span class="dt">Api</span>
api <span class="fu">=</span> <span class="dt">Proxy</span>

<span class="co">-- compose our server from handlers to satisfy the type of our API</span>
<span class="ot">server ::</span> <span class="dt">Server</span> <span class="dt">Api</span>
server <span class="fu">=</span> echoPath <span class="fu">:&lt;|&gt;</span> echoHello <span class="fu">:&lt;|&gt;</span> echo

<span class="ot">app ::</span> <span class="dt">Application</span>
app <span class="fu">=</span> serve api server

<span class="ot">runApp ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()
runApp port <span class="fu">=</span> run port app  <span class="co">-- run our</span></code></pre></div>
</section><section id="servant-isnt-just-for-services" class="slide level2">
<h2>Servant isn’t just for services</h2>
<ul>
<li>Servant is not limited to only being a service</li>
<li>You can use it to serve web pages</li>
<li>You can use it to serve static content</li>
<li>You can actually use any other WAI based server framework for part of your site</li>
<li>You are left with the choice of how to compose what you want though
<ul>
<li>HTLM templating - Blaze or Lucid</li>
<li>Serve static files - Use servant or another WAI application</li>
<li>etc …</li>
</ul></li>
</ul>
</section><section id="we-want-to-serve-our-client" class="slide level2">
<h2>We want to serve our client</h2>
<ul>
<li>Single page web application - So skip HTML templating</li>
<li>Serve only static files - Generated by client tool chain</li>
<li>Serve dynamic JS for client settings</li>
</ul>
</section><section id="serving-up-the-client" class="slide level2">
<h2>Serving up the client</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">           <span class="co">-- /settings.js - our dynamic JS giving settings back to the client</span>
<span class="kw">type</span> <span class="dt">Api</span> <span class="fu">=</span> <span class="st">&quot;settings.js&quot;</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[PlainText] Text</span>
           <span class="co">-- / - serve static files (must be last)</span>
         <span class="fu">:&lt;|&gt;</span> <span class="dt">Raw</span>

<span class="kw">data</span> <span class="dt">Settings</span> <span class="fu">=</span> <span class="dt">Settings</span>  <span class="co">-- The settings we communicate to the client</span>
  {<span class="ot"> port      ::</span> <span class="dt">Int</span>      <span class="co">-- The port we are running on, silly I know</span>
  ,<span class="ot"> host      ::</span> <span class="dt">Text</span>     <span class="co">-- The name of the host, silly I know</span>
  ,<span class="ot"> clientApp ::</span> <span class="dt">Text</span>     <span class="co">-- The function to execute on the client (actually useful)</span>
  } <span class="kw">deriving</span> (<span class="dt">Show</span>)

<span class="co">-- Our settings handler type actually differs from the standard Servant handler type - Servant is that flexible</span>
<span class="kw">type</span> <span class="dt">Handler</span> <span class="fu">=</span> <span class="dt">ReaderT</span> <span class="dt">Settings</span> (<span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span>)
<span class="ot">settings ::</span> <span class="dt">Handler</span> <span class="dt">Text</span>
settings <span class="fu">=</span> <span class="kw">do</span>
  <span class="dt">Settings</span> {<span class="fu">..</span>} <span class="ot">&lt;-</span> ask
  return <span class="fu">$</span> T.unlines [ <span class="st">&quot;SettingsETFWA = {};&quot;</span> , <span class="st">&quot;SettingsETFWA.port = &quot;</span> <span class="fu">&lt;&gt;</span> (T.pack <span class="fu">.</span> show <span class="fu">$</span> port) <span class="fu">&lt;&gt;</span> <span class="st">&quot;;&quot;</span> , <span class="st">&quot;SettingsETFWA.host = '&quot;</span> <span class="fu">&lt;&gt;</span> host <span class="fu">&lt;&gt;</span> <span class="st">&quot;';&quot;</span> , <span class="st">&quot;SettingsETFWA.app = '&quot;</span> <span class="fu">&lt;&gt;</span> clientApp <span class="fu">&lt;&gt;</span> <span class="st">&quot;';&quot;</span> ]

<span class="co">-- Use built in servant handler to serve static content from the data folder</span>
<span class="ot">content ::</span> <span class="dt">Server</span> <span class="dt">Raw</span>
content <span class="fu">=</span> serveDirectory <span class="st">&quot;../data&quot;</span>

<span class="co">-- Natural transformation that lets our special handler be run by servant</span>
<span class="ot">handlerToServant ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Handler</span> <span class="fu">:~&gt;</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span>
handlerToServant <span class="fu">=</span> runReaderTNat

<span class="co">-- Construct the server</span>
<span class="ot">server ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Server</span> <span class="dt">Api</span>
server s <span class="fu">=</span> enter (handlerToServant s) settings  <span class="co">-- Lift our special handler to run alongside normal ones</span>
         <span class="fu">:&lt;|&gt;</span> content

<span class="ot">api ::</span> <span class="dt">Proxy</span> <span class="dt">Api</span>
api <span class="fu">=</span> <span class="dt">Proxy</span>

<span class="ot">app ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Application</span>
app s <span class="fu">=</span> serve api (server s)

<span class="ot">runApp ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()
runApp port <span class="fu">=</span> run port (app <span class="dt">Settings</span>{port <span class="fu">=</span> port, host <span class="fu">=</span> <span class="st">&quot;localhost&quot;</span>, clientApp <span class="fu">=</span> <span class="st">&quot;CounterExample&quot;</span>})</code></pre></div>
</section><section id="serve-the-client-and-echo-his-requests" class="slide level2">
<h2>Serve the client and echo his requests</h2>
<ul>
<li>I want to serve the client and echo his request</li>
<li>Do I have to rewrite my servers</li>
<li>No I can just compose them</li>
</ul>
</section><section id="echoing-our-served-client" class="slide level2">
<h2>Echoing our served client</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- Import our two servers</span>
<span class="kw">import qualified</span> <span class="dt">Client</span>
<span class="kw">import qualified</span> <span class="dt">Echo</span>

<span class="co">-- Our API is the composition of the two other APIs</span>
<span class="kw">type</span> <span class="dt">Api</span> <span class="fu">=</span> <span class="dt">Echo.Api</span>
         <span class="fu">:&lt;|&gt;</span> <span class="dt">Client.Api</span>

<span class="co">-- Our server is the composition of the two servers</span>
<span class="ot">server ::</span> <span class="dt">Client.Settings</span> <span class="ot">-&gt;</span> <span class="dt">Server</span> <span class="dt">Api</span>
server s <span class="fu">=</span> Echo.server
         <span class="fu">:&lt;|&gt;</span> Client.server s

<span class="ot">api ::</span> <span class="dt">Proxy</span> <span class="dt">Api</span>
api <span class="fu">=</span> <span class="dt">Proxy</span>

<span class="ot">app ::</span> <span class="dt">Client.Settings</span> <span class="ot">-&gt;</span> <span class="dt">Application</span>
app s <span class="fu">=</span> serve api (server s)

<span class="ot">runApp ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()
runApp port clientApp <span class="fu">=</span> run port (app <span class="dt">Client.Settings</span>{Client.port <span class="fu">=</span> port, Client.host <span class="fu">=</span> <span class="st">&quot;localhost&quot;</span>, Client.clientApp <span class="fu">=</span> clientApp})</code></pre></div>
</section></section>
<section><section id="client" class="titleslide slide level1"><h1>Client</h1></section><section id="getting-started-1" class="slide level2">
<h2>Getting Started</h2>
<ul>
<li>Surprisingly more involved than the server but not too bad.</li>
<li>Install latest version of PureScript compiler
<ul>
<li><code>cabal fetch purescript-0.7.6.1 &amp;&amp; cd purescript-0.7.6.1 &amp;&amp; stack install</code></li>
</ul></li>
<li>Install NodeJs and NPM</li>
<li>Initialize NPM and install your dev dependencies
<ul>
<li><code>npm init</code></li>
<li><code>npm install webpack css-loader html-webpack-plugin style-loader --save-dev</code></li>
<li><code>npm install webpack-dev-server purs-loader@0.4.0 virtual-dom --save-dev</code></li>
</ul></li>
<li>Install pulp to manage PureScript packages only
<ul>
<li><code>npm install -g pulp</code></li>
</ul></li>
<li>Initialize your directory for PureScript and install libraries
<ul>
<li><code>pulp init</code></li>
<li><code>pulp dep install purescript-console purescript-lists purescript-halogen purescript-affjax --save</code></li>
<li><code>pulp dep install purescript-tuples purescript-debug purescript-routing --save</code></li>
</ul></li>
<li>Install virtual-dom needed by halogen - <code>npm install virtual-dom --save</code></li>
<li>Setup our webpack configuration file</li>
</ul>
</section><section id="webpack-1" class="slide level2">
<h2>Webpack</h2>
<ul>
<li>Webpack is going to look at some JS file</li>
<li>It will follow all <code>require()</code>s that it sees and compile them into one <code>bundle.js</code></li>
<li>The types of things can be include are based on the loaders
<ul>
<li>purs-loader to load purescript</li>
<li>css-loader to load css files</li>
<li>many more</li>
</ul></li>
<li>Plugin that will automatically generate your <code>index.html</code></li>
<li>Plugin that will run a dev server recompiling whenever changes are detected</li>
<li>Plugin that will hot swap your code whenever it recompiles</li>
<li>Gives you rapid feedback when doing frontend work</li>
<li>You will need CORS when using webpack-dev-server with your actual server</li>
</ul>
</section><section id="our-js-webpack-entry-point" class="slide level2">
<h2>Our JS Webpack Entry point</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="at">require</span>(<span class="st">'./main.css'</span>)<span class="op">;</span>  <span class="co">// here we include CSS</span>

<span class="kw">var</span> settings <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./settings&quot;</span>)<span class="op">;</span>  <span class="co">// here we include our seetins.js file</span>
<span class="co">// Depending on our settings we include different purescript apps and run them</span>
<span class="cf">if</span> (<span class="va">settings</span>.<span class="at">app</span> <span class="op">===</span> <span class="st">'RoutesExample'</span>)
<span class="op">{</span>
    <span class="kw">var</span> app <span class="op">=</span> <span class="at">require</span>(<span class="st">'./RoutesExample.purs'</span>)<span class="op">;</span>
    <span class="va">app</span>.<span class="at">runApp</span>()<span class="op">;</span>
<span class="op">}</span>
<span class="cf">else</span> <span class="cf">if</span> (<span class="va">settings</span>.<span class="at">app</span> <span class="op">===</span> <span class="st">'EchoOnly'</span>)
<span class="op">{</span>
    <span class="kw">var</span> app <span class="op">=</span> <span class="at">require</span>(<span class="st">'./EchoOnly.purs'</span>)<span class="op">;</span>
    <span class="va">app</span>.<span class="at">runApp</span>()<span class="op">;</span>
<span class="op">}</span>
<span class="cf">else</span> <span class="cf">if</span> (<span class="va">settings</span>.<span class="at">app</span> <span class="op">===</span> <span class="st">'CounterExample'</span>)
<span class="op">{</span>
    <span class="kw">var</span> app <span class="op">=</span> <span class="at">require</span>(<span class="st">'./CounterExample.purs'</span>)<span class="op">;</span>
    <span class="va">app</span>.<span class="at">runApp</span>()<span class="op">;</span>
<span class="op">}</span>
<span class="cf">else</span>
<span class="op">{</span>
  <span class="va">console</span>.<span class="at">error</span>(<span class="st">&quot;blah&quot;</span>)<span class="op">;</span>
<span class="op">}</span></code></pre></div>
</section><section id="halogen" class="slide level2">
<h2>Halogen</h2>
<ul>
<li>Its a declarative UI framework</li>
<li>It is component based</li>
<li>It is basically MVC’ish</li>
<li>You have a hierarchy of components</li>
<li>Each component sort of has
<ul>
<li>Its model / state</li>
<li>A query algebra that specifies ways the model can change / requests on the model</li>
<li>A function that update the model given queries</li>
<li>A function that renders the model and may generate asynchronous queries</li>
</ul></li>
<li>Parents in the hierarchy can
<ul>
<li>Do requests on their children using their query algebras</li>
<li>Peek at any of their children’s queries after they handled them</li>
<li>Information flow is one way only - Parent to child</li>
</ul></li>
</ul>
</section><section id="halogen-1" class="slide level2">
<h2>Halogen</h2>
<ul>
<li>It has some scary types</li>
<li>But it has good tutorials</li>
<li>The types will guide you</li>
<li>I think it is commercially used - SlamData</li>
</ul>
</section><section id="from-the-their-tutorial" class="slide level2">
<h2>From the their tutorial</h2>
<p>From https://github.com/slamdata/purescript-halogen</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- | The state of the component</span>
<span class="kw">type</span> <span class="dt">State</span> <span class="fu">=</span> {<span class="ot"> on ::</span> <span class="dt">Boolean</span> }

<span class="co">-- | The query algebra for the component</span>
<span class="kw">data</span> <span class="dt">Query</span> a
  <span class="fu">=</span> <span class="dt">ToggleState</span> a
  <span class="fu">|</span> <span class="dt">GetState</span> (<span class="dt">Boolean</span> <span class="ot">-&gt;</span> a)

<span class="co">-- | The component definition</span>
<span class="ot">myComponent ::</span> forall g<span class="fu">.</span> (<span class="dt">Functor</span> g) <span class="ot">=&gt;</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> g
myComponent <span class="fu">=</span> component render eval
  <span class="kw">where</span>

<span class="ot">  render ::</span> <span class="dt">State</span> <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> <span class="dt">Query</span>
  render state <span class="fu">=</span>
    H.div_
      [ H.h1_
          [ H.text <span class="st">&quot;Toggle Button&quot;</span> ]
      , H.button
          [ E.onClick (E.input_ <span class="dt">ToggleState</span>) ]
          [ H.text (<span class="kw">if</span> state<span class="fu">.</span>on <span class="kw">then</span> <span class="st">&quot;On&quot;</span> <span class="kw">else</span> <span class="st">&quot;Off&quot;</span>) ]
      ]

<span class="ot">  eval ::</span> <span class="dt">Natural</span> <span class="dt">Query</span> (<span class="dt">ComponentDSL</span> <span class="dt">State</span> <span class="dt">Query</span> g)
  eval (<span class="dt">ToggleState</span> next) <span class="fu">=</span> <span class="kw">do</span>
    modify (\state <span class="ot">-&gt;</span> { on<span class="fu">:</span> not state<span class="fu">.</span>on })
    pure next
  eval (<span class="dt">GetState</span> continue) <span class="fu">=</span> <span class="kw">do</span>
    value <span class="ot">&lt;-</span> gets _<span class="fu">.</span>on
    pure (continue value)</code></pre></div>
</section><section id="from-the-their-tutorial-1" class="slide level2">
<h2>From the their tutorial</h2>
<p>From https://github.com/slamdata/purescript-halogen</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">component ::</span> forall s f g<span class="fu">.</span> <span class="dt">Render</span> s f <span class="ot">-&gt;</span> <span class="dt">Eval</span> f s f g <span class="ot">-&gt;</span> <span class="dt">Component</span> s f g</code></pre></div>
<ul>
<li>s is the component’s state.</li>
<li>f is the component’s query algebra.</li>
<li>g is a functor integrated into the component’s query algebra that allows embedding of external DSLs or handling of effects</li>
</ul>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">type</span> <span class="dt">Render</span> s f <span class="fu">=</span> s <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> f
<span class="kw">type</span> <span class="dt">ComponentHTML</span> f <span class="fu">=</span> <span class="dt">HTML</span> <span class="dt">Void</span> (f <span class="dt">Unit</span>)</code></pre></div>
<ul>
<li>A render function takes the component’s current state value and returns a value constructed using Halogen’s type safe HTML DSL, with the ability for elements in the rendered HTML to send actions back to the component, using the query algebra f.</li>
</ul>
</section><section id="the-counter-example" class="slide level2">
<h2>The counter example</h2>
<p>From https://github.com/slamdata/purescript-halogen</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">newtype</span> <span class="dt">State</span> <span class="fu">=</span> <span class="dt">State</span> <span class="dt">Int</span>

<span class="ot">initialState ::</span> <span class="dt">State</span>
initialState <span class="fu">=</span> <span class="dt">State</span> <span class="dv">0</span>

<span class="kw">data</span> <span class="dt">Query</span> a <span class="fu">=</span> <span class="dt">Tick</span> a

<span class="ot">ui ::</span> forall g<span class="fu">.</span> (<span class="dt">Functor</span> g) <span class="ot">=&gt;</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> g
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>
<span class="ot">  render ::</span> <span class="dt">State</span> <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> <span class="dt">Query</span>
  render (<span class="dt">State</span> n) <span class="fu">=</span>
    H.div_
      [ H.h1
          [ P.id_ <span class="st">&quot;header&quot;</span> ]
          [ H.text <span class="st">&quot;counter&quot;</span> ]
      , H.p_
          [ H.text (show n) ]
      ]

<span class="ot">  eval ::</span> <span class="dt">Natural</span> <span class="dt">Query</span> (<span class="dt">ComponentDSL</span> <span class="dt">State</span> <span class="dt">Query</span> g)
  eval (<span class="dt">Tick</span> next) <span class="fu">=</span> <span class="kw">do</span>
    modify (\(<span class="dt">State</span> n) <span class="ot">-&gt;</span> <span class="dt">State</span> (n <span class="fu">+</span> <span class="dv">1</span>))
    pure next

<span class="co">-- | Run the app</span>
<span class="ot">runApp ::</span> <span class="dt">Eff</span> (<span class="dt">HalogenEffects</span> ()) <span class="dt">Unit</span>
runApp <span class="fu">=</span> runAff throwException (const (pure unit)) <span class="fu">$</span> <span class="kw">do</span>
  { node<span class="fu">:</span> node, driver<span class="fu">:</span> driver } <span class="ot">&lt;-</span> runUI ui initialState
  onLoad <span class="fu">$</span> appendToBody node
  setInterval <span class="dv">1000</span> <span class="fu">$</span> driver (action <span class="dt">Tick</span>)

<span class="ot">setInterval ::</span> forall e a<span class="fu">.</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Aff</span> e a <span class="ot">-&gt;</span> <span class="dt">Aff</span> e <span class="dt">Unit</span>
setInterval ms a <span class="fu">=</span> later' ms <span class="fu">$</span> a <span class="fu">*&gt;</span> setInterval ms a</code></pre></div>
</section><section id="echo-client" class="slide level2">
<h2>Echo Client</h2>
<ul>
<li>For the GUI
<ul>
<li>Select kind of echo end point to query</li>
<li>Input message if needed</li>
<li>Display returned echoed message</li>
</ul></li>
<li>Need to do XHR request to server</li>
<li>Need to decode the response</li>
</ul>
</section><section id="echo-client-state" class="slide level2">
<h2>Echo Client State</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">type</span> <span class="dt">EchoResponse</span> <span class="fu">=</span>
  {<span class="ot"> path      ::</span> <span class="dt">String</span>
  ,<span class="ot"> message   ::</span> <span class="dt">String</span>
  ,<span class="ot"> timeStamp ::</span> <span class="dt">String</span>
  }
<span class="kw">data</span> <span class="dt">MessageType</span>
  <span class="fu">=</span> <span class="dt">HelloMessage</span> {<span class="ot">message ::</span> <span class="dt">String</span>,<span class="ot"> response ::</span> <span class="dt">Maybe</span> <span class="dt">EchoResponse</span>}
  <span class="fu">|</span> <span class="dt">EchoMessage</span> {<span class="ot">message ::</span> <span class="dt">String</span>,<span class="ot"> response ::</span> <span class="dt">Maybe</span> <span class="dt">EchoResponse</span>}
  <span class="fu">|</span> <span class="dt">PathMessage</span> {<span class="ot">response ::</span> <span class="dt">Maybe</span> <span class="dt">EchoResponse</span>}

<span class="kw">type</span> <span class="dt">State</span> <span class="fu">=</span> <span class="dt">MessageType</span></code></pre></div>
</section><section id="query-algebra-and-effects" class="slide level2">
<h2>Query Algebra and Effects</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"> <span class="co">-- The type of effects we can use</span>
<span class="kw">type</span> <span class="dt">Effects</span> eff <span class="fu">=</span> <span class="dt">HalogenEffects</span> (<span class="ot">console ::</span> <span class="dt">CONSOLE</span>,<span class="ot"> ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff)
<span class="co">-- Our query algebra (ways changes can be triggered)</span>
<span class="kw">data</span> <span class="dt">Query</span> a 
  <span class="fu">=</span> <span class="dt">SelectHello</span> a
  <span class="fu">|</span> <span class="dt">SelectEcho</span> a
  <span class="fu">|</span> <span class="dt">SelectPath</span> a
  <span class="fu">|</span> <span class="dt">SetHello</span> <span class="dt">String</span> a
  <span class="fu">|</span> <span class="dt">SetEcho</span> <span class="dt">String</span> a
  <span class="fu">|</span> <span class="dt">SendHello</span> <span class="dt">State</span> a
  <span class="fu">|</span> <span class="dt">SendEcho</span> <span class="dt">State</span> a
  <span class="fu">|</span> <span class="dt">SendPath</span> <span class="dt">State</span> a</code></pre></div>
</section><section id="evaluate-the-query-algebra" class="slide level2">
<h2>Evaluate the query algebra</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">ui ::</span> forall eff<span class="fu">.</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff))
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>
  <span class="co">-- .....</span>
  <span class="co">-- ....  leaving out some code</span>
<span class="ot">  eval ::</span> <span class="dt">Natural</span> <span class="dt">Query</span> (<span class="dt">ComponentDSL</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff)))
  eval (<span class="dt">SelectHello</span> next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> modify \_ <span class="ot">-&gt;</span> (<span class="dt">HelloMessage</span> {message<span class="fu">:</span> <span class="st">&quot;&quot;</span>, response<span class="fu">:</span> <span class="dt">Nothing</span>})
  eval (<span class="dt">SetHello</span> m next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> modify
    \state <span class="ot">-&gt;</span> <span class="kw">case</span> state <span class="kw">of</span>
      <span class="dt">HelloMessage</span> d <span class="ot">-&gt;</span> <span class="dt">HelloMessage</span> d{message<span class="fu">=</span>m, response<span class="fu">=</span><span class="dt">Nothing</span>}
      _ <span class="ot">-&gt;</span> state
  eval (<span class="dt">SendHello</span> s next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> <span class="kw">case</span> s <span class="kw">of</span>
    <span class="dt">HelloMessage</span> d <span class="ot">-&gt;</span> <span class="kw">do</span>
        r <span class="ot">&lt;-</span> liftAff' <span class="fu">$</span> sendHello d<span class="fu">.</span>message
        modify \_ <span class="ot">-&gt;</span> <span class="dt">HelloMessage</span> d{response <span class="fu">=</span> <span class="dt">Just</span> r}
    _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span>

  eval (<span class="dt">SelectEcho</span> next) <span class="fu">=</span> modify (\state <span class="ot">-&gt;</span> <span class="dt">EchoMessage</span> {message<span class="fu">:</span> <span class="st">&quot;&quot;</span>, response<span class="fu">:</span> <span class="dt">Nothing</span>}) <span class="fu">*&gt;</span> pure next
  eval (<span class="dt">SetEcho</span> m next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> modify
    \state <span class="ot">-&gt;</span> <span class="kw">case</span> state <span class="kw">of</span>
        <span class="dt">EchoMessage</span> d <span class="ot">-&gt;</span> <span class="dt">EchoMessage</span> d{message<span class="fu">=</span>m, response<span class="fu">=</span><span class="dt">Nothing</span>}
        _ <span class="ot">-&gt;</span> state
  eval (<span class="dt">SendEcho</span> s next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> <span class="kw">case</span> s <span class="kw">of</span>
    <span class="dt">EchoMessage</span> d <span class="ot">-&gt;</span> <span class="kw">do</span>
        r <span class="ot">&lt;-</span> liftAff' <span class="fu">$</span> sendEcho d<span class="fu">.</span>message
        modify \_ <span class="ot">-&gt;</span> <span class="dt">EchoMessage</span> d{response <span class="fu">=</span> <span class="dt">Just</span> r}
    _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span>

  eval (<span class="dt">SelectPath</span> next) <span class="fu">=</span> modify (\state <span class="ot">-&gt;</span> <span class="dt">PathMessage</span> {response<span class="fu">:</span> <span class="dt">Nothing</span>}) <span class="fu">*&gt;</span> pure next
  eval (<span class="dt">SendPath</span> s next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> <span class="kw">case</span> s <span class="kw">of</span>
    <span class="dt">PathMessage</span> d <span class="ot">-&gt;</span> <span class="kw">do</span>
        r <span class="ot">&lt;-</span> liftAff' <span class="fu">$</span> sendPath
        modify \_ <span class="ot">-&gt;</span> <span class="dt">PathMessage</span> d{response <span class="fu">=</span> <span class="dt">Just</span> r}
    _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span></code></pre></div>
</section><section id="do-the-ajax" class="slide level2">
<h2>Do the Ajax</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">newtype</span> <span class="dt">EchoResponseR</span> <span class="fu">=</span> <span class="dt">EchoResponseR</span> <span class="dt">EchoResponse</span>
<span class="kw">instance</span><span class="ot"> respondableEchoResponseR ::</span> <span class="dt">Respondable</span> <span class="dt">EchoResponseR</span> <span class="kw">where</span>
  fromResponse r' <span class="fu">=</span> <span class="kw">do</span>
    r <span class="ot">&lt;-</span> read r' <span class="fu">&gt;&gt;=</span> readJSON
    p <span class="ot">&lt;-</span> readProp <span class="st">&quot;path&quot;</span> r
    m <span class="ot">&lt;-</span> readProp <span class="st">&quot;message&quot;</span> r
    t <span class="ot">&lt;-</span> readProp <span class="st">&quot;timeStamp&quot;</span> r
    pure <span class="fu">$</span> <span class="dt">EchoResponseR</span> {path<span class="fu">:</span> p, message<span class="fu">:</span> m, timeStamp<span class="fu">:</span> t}
  responseType <span class="fu">=</span> <span class="dt">Tuple</span> (<span class="dt">Just</span> applicationJSON) <span class="dt">JSONResponse</span>

<span class="ot">sendHello ::</span> forall eff<span class="fu">.</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Aff</span> (<span class="ot">ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff) <span class="dt">EchoResponse</span>
sendHello s <span class="fu">=</span>  Ajax.get (<span class="st">&quot;http://localhost:8086/echo/hello?message=&quot;</span> <span class="fu">++</span> s) <span class="fu">&lt;#&gt;</span> \a <span class="ot">-&gt;</span> <span class="kw">case</span> a<span class="fu">.</span>response <span class="kw">of</span> <span class="dt">EchoResponseR</span> r <span class="ot">-&gt;</span> r

<span class="ot">sendEcho ::</span> forall eff<span class="fu">.</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Aff</span> (<span class="ot">ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff) <span class="dt">EchoResponse</span>
sendEcho s <span class="fu">=</span>  Ajax.get (<span class="st">&quot;http://localhost:8086/echo?message=&quot;</span> <span class="fu">++</span> s) <span class="fu">&lt;#&gt;</span> \a <span class="ot">-&gt;</span> <span class="kw">case</span> a<span class="fu">.</span>response <span class="kw">of</span> <span class="dt">EchoResponseR</span> r <span class="ot">-&gt;</span> r

<span class="ot">sendPath ::</span> forall eff<span class="fu">.</span> <span class="dt">Aff</span> (<span class="ot">ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff) <span class="dt">EchoResponse</span>
sendPath <span class="fu">=</span>  Ajax.get (<span class="st">&quot;http://localhost:8086/echo/path&quot;</span>) <span class="fu">&lt;#&gt;</span> \a <span class="ot">-&gt;</span> <span class="kw">case</span> a<span class="fu">.</span>response <span class="kw">of</span> <span class="dt">EchoResponseR</span> r <span class="ot">-&gt;</span> r</code></pre></div>
</section><section id="render-the-main-gui" class="slide level2">
<h2>Render the main GUI</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">ui ::</span> forall eff<span class="fu">.</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff))
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>

<span class="ot">  render ::</span> <span class="dt">State</span> <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> <span class="dt">Query</span>
  render s <span class="fu">=</span> <span class="kw">case</span> renderOption s <span class="kw">of</span>
      <span class="dt">Tuple</span> option child <span class="ot">-&gt;</span>
           H.div_
             [ H.select [E.onValueChange (E.input selectType)]
                 [ H.option [P.value <span class="st">&quot;Hello&quot;</span>, P.selected (option <span class="fu">==</span> <span class="st">&quot;Hello&quot;</span>)] [H.text <span class="st">&quot;Hello&quot;</span>]
                 , H.option [P.value <span class="st">&quot;Echo&quot;</span>, P.selected (option <span class="fu">==</span> <span class="st">&quot;Echo&quot;</span>)] [H.text <span class="st">&quot;Echo&quot;</span>]
                 , H.option [P.value <span class="st">&quot;Path&quot;</span>, P.selected (option <span class="fu">==</span> <span class="st">&quot;Path&quot;</span>)] [H.text <span class="st">&quot;Path&quot;</span>]
                 ]
             , child
             ]
      _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span>

  selectType s
     <span class="fu">|</span> s <span class="fu">==</span> <span class="st">&quot;Hello&quot;</span> <span class="fu">=</span> <span class="dt">SelectHello</span>
     <span class="fu">|</span> s <span class="fu">==</span> <span class="st">&quot;Echo&quot;</span> <span class="fu">=</span> <span class="dt">SelectEcho</span>
     <span class="fu">|</span> s <span class="fu">==</span> <span class="st">&quot;Path&quot;</span> <span class="fu">=</span> <span class="dt">SelectPath</span>
  <span class="co">-- ...</span>
  <span class="co">-- ... leaving out some code</span></code></pre></div>
</section><section id="rendering-message-guis" class="slide level2">
<h2>Rendering message GUIs</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">ui ::</span> forall eff<span class="fu">.</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff))
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>
  <span class="co">-- ...</span>
  <span class="co">-- ... leaving out some code</span>
  renderOption s <span class="fu">=</span> <span class="kw">case</span> s <span class="kw">of</span>
     <span class="dt">HelloMessage</span> {message<span class="fu">:</span> m, response<span class="fu">:</span> r} <span class="ot">-&gt;</span> <span class="dt">Tuple</span> <span class="st">&quot;Hello&quot;</span> <span class="fu">$</span> H.div_
        [ H.div_
            [ H.label_ [H.text <span class="st">&quot;message&quot;</span>]
            , H.input [P.inputType <span class="dt">P.InputText</span>, E.onValueChange (E.input <span class="dt">SetHello</span>)]
            ]
        , H.div_
            [ H.label_ [H.text (<span class="st">&quot;Hello response was:&quot;</span> <span class="fu">++</span> fromMaybe <span class="st">&quot;&quot;</span> (_<span class="fu">.</span>message <span class="fu">&lt;$&gt;</span> r))]
            ]
        , H.div_
            [ H.button [E.onClick (E.input_ <span class="fu">$</span> <span class="dt">SendHello</span> s)] [H.text <span class="st">&quot;echo friendly&quot;</span>]
            ]
        ]
     <span class="dt">EchoMessage</span> {message<span class="fu">:</span> m, response<span class="fu">:</span> r} <span class="ot">-&gt;</span> <span class="dt">Tuple</span> <span class="st">&quot;Echo&quot;</span> <span class="fu">$</span> H.div_
        [ H.div_
            [ H.label_ [H.text <span class="st">&quot;message&quot;</span>]
            , H.input [P.inputType <span class="dt">P.InputText</span>, E.onValueChange (E.input <span class="dt">SetEcho</span>)]
            ]
        , H.div_
            [ H.label_ [H.text (<span class="st">&quot;Response was:&quot;</span> <span class="fu">++</span> fromMaybe <span class="st">&quot;&quot;</span> (_<span class="fu">.</span>message <span class="fu">&lt;$&gt;</span> r))]
            ]
        , H.div_
            [ H.button [E.onClick (E.input_ <span class="fu">$</span> <span class="dt">SendEcho</span> s)] [H.text <span class="st">&quot;echo&quot;</span>]
            ]
        ]
     <span class="dt">PathMessage</span> {response<span class="fu">:</span> r} <span class="ot">-&gt;</span> <span class="dt">Tuple</span> <span class="st">&quot;Path&quot;</span> <span class="fu">$</span> H.div_
        [ H.div_
            [ H.label_ [H.text (<span class="st">&quot;Server path is:&quot;</span> <span class="fu">++</span> fromMaybe <span class="st">&quot;&quot;</span> (_<span class="fu">.</span>message <span class="fu">&lt;$&gt;</span> r))]
            ]
        , H.div_
            [ H.button [E.onClick (E.input_ <span class="fu">$</span> <span class="dt">SendPath</span> s)] [H.text <span class="st">&quot;request path&quot;</span>]
            ]
        ]</code></pre></div>
</section></section>
<section><section id="wrap-up" class="titleslide slide level1"><h1>Wrap up</h1></section><section id="my-feelings" class="slide level2">
<h2>My feelings</h2>
<ul>
<li>Server
<ul>
<li>Can’t go wrong with Haskell</li>
<li>Servant is amazing</li>
</ul></li>
<li>Client
<ul>
<li>Webpack really impressed me</li>
<li>PureScript not sure yet</li>
<li>Halogen not sure yet</li>
</ul></li>
</ul>
</section><section id="my-feelings---purescript" class="slide level2">
<h2>My feelings - PureScript</h2>
<p>Generally positive</p>
<ul>
<li>Its not Haskell ✗
<ul>
<li>Miss the compiler</li>
<li>Miss my tools</li>
<li>Miss some of my constructs</li>
</ul></li>
<li>Similar philosophy to Haskell ✓</li>
<li>Integrates easier on the browser ✓</li>
<li>Looks like its got momentum ✓</li>
<li>API search tool Pursuit is cool ✓</li>
</ul>
</section><section id="my-feelings---halogen" class="slide level2">
<h2>My feelings - Halogen</h2>
<p>Generally positive</p>
<ul>
<li>Need to use it more for something bigger</li>
<li>Special types for parent child relationships ✗</li>
<li>Seems to have some commercial backing / users ✓</li>
<li>Seems to have user buy in ✓</li>
</ul>
</section><section id="some-links" class="slide level2">
<h2>Some links</h2>
<ul>
<li>SurviveJs is a good guide for front end WebDev (good section on WebPack) <a href>https://survivejs.com/</a></li>
<li>Documentation and example for PureScript loader <a href>https://github.com/ethul/purs-loader</a></li>
<li>Documentation and examples for Halogen <a href>https://github.com/slamdata/purescript-halogen</a></li>
<li>A guide to use purescript-routing with purescript-halogen <a href>http://www.parsonsmatt.org/programming/2015/10/22/purescript_router.html</a></li>
<li>The PureScript book <a href>https://leanpub.com/purescript/read</a></li>
<li>The Pursuit search engine <a href>http://pursuit.purescript.org/</a></li>
</ul>
</section><section id="end" class="slide level2">
<h2>END</h2>
</section></section>
      </div>
    </div>
    

    <script src="../lib/js/head.min.js"></script>
    <script src="../js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({

        // // The "normal" size of the presentation, aspect ratio will be preserved
        // // when the presentation is scaled to fit different resolutions. Can be
        // // specified using percentage units.
        // width: 960,
        // height: 700,

        // // Factor of the display size that should remain empty around the content
        // margin: 0.0,

        // // Bounds for smallest/largest possible scale to apply to content
        // minScale: 0.1,
        // maxScale: 2.5,

        // with sizing
        width: 1000, height: 1350, margin: 0.1, minScale: 0.1, maxScale: 3,

        // no sizing
        // width: "100%", height: "100%", margin: 0, minScale: 1, maxScale: 1,

        // Display controls in the bottom right corner
        
        controls: true,
        


        // Display a presentation progress bar
        
        progress: true,
        

        // Set default timing of 2 minutes per slide
        defaultTiming: 120,

        // Display the page number of the current slide
        slideNumber: false,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: true,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autolaying embedded media (video/audio/iframe)
        // - null: Media will only autoplay if data-autoplay is present
        // - true: All media will autoplay, regardless of individual setting
        // - false: No media will autoplay, regardless of individual setting
        autoPlayMedia: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: Reveal.navigateNext,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // Hides the address bar on mobile devices
        hideAddressBar: true,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Transition speed
        transitionSpeed: 'default', // default/fast/slow

        // Transition style for full page slide backgrounds
        backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Parallax background image
        parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

        // Parallax background size
        parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

        // Number of pixels to move the parallax background per slide
        // - Calculated automatically unless specified
        // - Set to 0 to disable movement along an axis
        parallaxBackgroundHorizontal: null,
        parallaxBackgroundVertical: null,

        // The display mode that will be used to show slides
        display: 'block',

        // Optional reveal.js plugins
        dependencies: [
          { src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
