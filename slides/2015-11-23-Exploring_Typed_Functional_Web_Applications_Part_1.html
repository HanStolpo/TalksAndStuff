<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
      <!--beige.css*-->
      <!--black.css*-->
      <!--blood.css*-->
      <!--league.css*-->
      <!--moon.css*-->
      <!--night.css*-->
      <!--serif.css*-->
      <!--simple.css*-->
      <!--sky.css*-->
      <!--solarized.css*-->
      <!--white.css*-->
		<link rel="stylesheet" href="../css/reveal.css">
		<link rel="stylesheet" href="../css/theme/serif.css" id="theme">
		<link rel="stylesheet" type="text/css" href="../css/highlighting.css" />

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="../lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<div class="slides">
<section><section id="exploring-typed-functional-web-applications-part-1" class="titleslide slide level1"><h1>Exploring Typed Functional Web Applications Part 1</h1></section><section id="me" class="slide level2">
<h1>Me</h1>
<ul>
<li class="fragment">This REALLY is an exploration</li>
<li class="fragment">New to WebDev (started about 6 moths ago)</li>
<li class="fragment">Haven’t used these specific tools previously
<ul>
<li class="fragment">PureScript Halogen, Haskell Servant, WebPack</li>
</ul></li>
<li class="fragment">Stack currently used
<ul>
<li class="fragment">AngularJS, Haskell Yesod, NodeJS, CoffeeScript, Grunt, Gulp, Heroku</li>
</ul></li>
<li class="fragment">This talk is a learning experience</li>
</ul>
</section><section id="single-page-web-application" class="slide level2">
<h1>Single Page Web Application</h1>
<ul>
<li class="fragment">Server and Client</li>
<li class="fragment">Server
<ul>
<li class="fragment">serves up client</li>
<li class="fragment">shared service for clients</li>
<li class="fragment">“hundreds” of technology options</li>
</ul></li>
<li class="fragment">Client
<ul>
<li class="fragment">not simple static pages any more</li>
<li class="fragment">a lot of logic, state and behaviour</li>
<li class="fragment">“thousands” of technology options</li>
</ul></li>
</ul>
</section><section id="why-typed-functional" class="slide level2">
<h1>Why Typed Functional</h1>
<ul>
<li class="fragment">To be clear - Strongly Statically Typed Functional</li>
<li class="fragment">I make mistakes
<ul>
<li class="fragment">so many mistakes</li>
<li class="fragment">compiler holds my hand</li>
<li class="fragment">keeps me safe at night</li>
<li class="fragment">makes up for my deficiencies</li>
</ul></li>
<li class="fragment">I am power mad
<ul>
<li class="fragment">good power to weight ratio</li>
<li class="fragment">express complex things elegantly and correctly</li>
</ul></li>
<li class="fragment">I wan to be inefficient at WRITING code
<ul>
<li class="fragment">rather spend more time writing less code
<ul>
<li class="fragment">less buggy too</li>
</ul></li>
<li class="fragment">spend more time writing than running code
<ul>
<li class="fragment">less debugging buggy code</li>
</ul></li>
</ul></li>
</ul>
</section><section id="choices-on-server" class="slide level2">
<h1>Choices on Server</h1>
<ul>
<li class="fragment">Languages - Haskell or OCaml or ?</li>
<li class="fragment">Haskell Server Frameworks
<ul>
<li class="fragment">WAI - Yesod, Scotty, Servant, MFlow, Wheb, Spock</li>
<li class="fragment">Other - HappStack, Snap</li>
<li class="fragment">WAI has lots of composable middleware</li>
<li class="fragment">Servant is WAI and looked really cool</li>
</ul></li>
<li class="fragment">Haskell tool chain
<ul>
<li class="fragment">cabal install
<ul>
<li class="fragment">not really a tool chain</li>
</ul></li>
<li class="fragment">nix
<ul>
<li class="fragment">excellent and functional</li>
<li class="fragment">use for more than just Haskell</li>
<li class="fragment">doesn’t run everywhere and more buy in</li>
</ul></li>
<li class="fragment">Stack
<ul>
<li class="fragment">new kid on the block</li>
<li class="fragment">easy to use and runs on “everywhere”</li>
</ul></li>
</ul></li>
</ul>
</section><section id="languages-choices-on-client" class="slide level2">
<h1>Languages Choices on Client</h1>
<ul>
<li class="fragment">Haskell GHCJs</li>
<li class="fragment">Haskell Haste</li>
<li class="fragment">Elm</li>
<li class="fragment">PureScript</li>
<li class="fragment">or ?</li>
</ul>
</section><section id="haskell-haste" class="slide level2">
<h1>Haskell Haste</h1>
<ul>
<li class="fragment">Compiles fair amount of Haskell code to JS ✓</li>
<li class="fragment">Missing some Haskell features ✗</li>
<li class="fragment">Share code between server client ✓</li>
<li class="fragment">Needs a runtime ✗ - small though ✓</li>
<li class="fragment">No real client side frameworks ✗</li>
<li class="fragment">Integration with other JS a problem ✗</li>
</ul>
</section><section id="haskell-ghcjs" class="slide level2">
<h1>Haskell GHCJs</h1>
<ul>
<li class="fragment">Compiles most Haskell code to JS ✓</li>
<li class="fragment">Share code between server client ✓</li>
<li class="fragment">Needs a large runtime ✗</li>
<li class="fragment">Has client side frameworks ✓
<ul>
<li class="fragment">oHm - Om inspired Haskell component MVC</li>
<li class="fragment">Reflex-Dom - FRP</li>
</ul></li>
<li class="fragment">Integration with other JS a problem ✗</li>
</ul>
</section><section id="elm" class="slide level2">
<h1>Elm</h1>
<ul>
<li class="fragment">Haskell inspired ✓</li>
<li class="fragment">Language based on FRP ✓</li>
<li class="fragment">Front end first ✓</li>
<li class="fragment">Client side framework comes with the language (sort off) ✓</li>
<li class="fragment">Suggested client side architecture not actually FRP more component MVC ?</li>
<li class="fragment">Integration with other JS easy ✓</li>
<li class="fragment">Simple ✓, but lacking in power ✗</li>
<li class="fragment">Can’t share code between server client ✗</li>
</ul>
</section><section id="purescript" class="slide level2">
<h1>PureScript</h1>
<ul>
<li class="fragment">Haskell like language ✓
<ul>
<li class="fragment">A lot of the power from Haskell ✓</li>
<li class="fragment">A lot of the learning curve from Haskell ✗</li>
<li class="fragment">Some extra goodies - row polymorphism, cleaner class hierarchy ✓</li>
</ul></li>
<li class="fragment">Is strict not lazy ?</li>
<li class="fragment">No runtime required ✓</li>
<li class="fragment">Easy integration with other JS ✓</li>
<li class="fragment">Has client side frameworks ✓
<ul>
<li class="fragment">purescript-halogen</li>
<li class="fragment">purescript-thermite</li>
</ul></li>
</ul>
</section><section id="toolchain-for-client" class="slide level2">
<h1>Toolchain for Client</h1>
<ul>
<li class="fragment">General JS ➡ Browser JS</li>
<li class="fragment">Other Assets ➡ Browser Assets ?</li>
<li class="fragment">You will need Node.js</li>
<li class="fragment">You will need NPM</li>
<li class="fragment">You will probably need Bower</li>
<li class="fragment">Need some combination of the following
<ul>
<li class="fragment">Browserify, Webpack</li>
<li class="fragment">Gulp, Grunt</li>
<li class="fragment">Make, JSPM</li>
<li class="fragment">probably more</li>
</ul></li>
<li class="fragment">Picked Webpack - seemed easiest</li>
</ul>
</section><section id="webpack" class="slide level2">
<h1>Webpack</h1>
<ul>
<li class="fragment">Compiles JS, CSS, images, … into single JS file to serve</li>
<li class="fragment">Configuration based</li>
<li class="fragment">Lots of plugins</li>
<li class="fragment">Dev server with hot reload</li>
<li class="fragment">Easy to get started</li>
<li class="fragment">check out SurviveJs book [http://survivejs.com/]</li>
</ul>
</section></section>
<section><section id="server" class="titleslide slide level1"><h1>Server</h1></section><section id="getting-started" class="slide level2">
<h1>Getting started</h1>
<ul>
<li class="fragment">Was easy</li>
<li class="fragment">Install stack</li>
<li class="fragment">run - stack init</li>
<li class="fragment">add servant-server and other libs to your cabal file</li>
<li class="fragment">edit your stack.yaml adding “local-bin-path: ../bin”</li>
<li class="fragment">stack build</li>
<li class="fragment">ready</li>
</ul>
</section><section id="servant" class="slide level2">
<h1>Servant</h1>
<ul>
<li class="fragment">Pretty new</li>
<li class="fragment">Good documentation though</li>
<li class="fragment">Uses some advanced Haskell
<ul>
<li class="fragment">needs recent compiler</li>
<li class="fragment">but still easy to use</li>
</ul></li>
<li class="fragment">Extremely composable</li>
</ul>
</section><section id="defining-an-api-server-endpoints" class="slide level2">
<h1>Defining an API (server endpoints)</h1>
<ul>
<li class="fragment">Define your API as type</li>
<li class="fragment">Compose handlers to satisfy that type</li>
<li class="fragment">Run your server</li>
</ul>
</section><section id="a-little-echo-server" class="slide level2">
<h1>A little echo server</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">EchoMessage</span> <span class="fu">=</span> <span class="dt">EchoMessage</span> <span class="co">-- The messages we echo</span>
  {<span class="ot"> path      ::</span> <span class="dt">Text</span>          <span class="co">-- The route that was hit</span>
  ,<span class="ot"> message   ::</span> <span class="dt">Text</span>          <span class="co">-- The message to echo</span>
  ,<span class="ot"> timeStamp ::</span> <span class="dt">UTCTime</span>       <span class="co">-- The server side time stamp</span>
  } <span class="kw">deriving</span> (<span class="dt">Show</span>, <span class="dt">Eq</span>, <span class="dt">Generic</span>)
<span class="kw">instance</span> <span class="dt">ToJSON</span> <span class="dt">EchoMessage</span>    <span class="co">-- Turn messages into JSON</span>
<span class="kw">instance</span> <span class="dt">FromJSON</span> <span class="dt">EchoMessage</span>  <span class="co">-- Turn JSON into a message</span>

<span class="co">-- This is our API as a type - all endpoints are returning JSON derived from our type EchoMessage</span>
           <span class="co">-- /echo/path  - capturing no part of the path and no query param</span>
<span class="kw">type</span> <span class="dt">Api</span> <span class="fu">=</span> <span class="st">&quot;echo&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;path&quot;</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[JSON] EchoMessage</span>
           <span class="co">-- /echo/:hello?message=xyz - capturing part of the path naming it as hello and taking a query parameter</span>
         <span class="fu">:&lt;|&gt;</span> <span class="st">&quot;echo&quot;</span> <span class="fu">:&gt;</span> <span class="dt">Capture</span> <span class="st">&quot;hello&quot;</span> <span class="dt">Text</span> <span class="fu">:&gt;</span> <span class="dt">QueryParam</span> <span class="st">&quot;message&quot;</span> <span class="dt">Text</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[JSON] EchoMessage</span>
           <span class="co">-- /echo?message=xyz - capturing no part of the path and taking a query parameter</span>
         <span class="fu">:&lt;|&gt;</span> <span class="st">&quot;echo&quot;</span> <span class="fu">:&gt;</span> <span class="dt">QueryParam</span> <span class="st">&quot;message&quot;</span> <span class="dt">Text</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[JSON] EchoMessage</span>

<span class="co">-- handle /echo/:hello?message=</span>
<span class="ot">echoHello ::</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span> <span class="dt">EchoMessage</span>
echoHello p m <span class="fu">=</span> <span class="dt">EchoMessage</span> (<span class="st">&quot;echo/&quot;</span> <span class="fu">&lt;&gt;</span> p) (<span class="st">&quot;hello your message was \&quot;&quot;</span> <span class="fu">&lt;&gt;</span> fromMaybe <span class="st">&quot;&quot;</span> m <span class="fu">&lt;&gt;</span> <span class="st">&quot;\&quot;&quot;</span>) <span class="fu">&lt;$&gt;</span> liftIO getCurrentTime
<span class="co">-- handle /echo?message=</span>
<span class="ot">echo ::</span> <span class="dt">Maybe</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span> <span class="dt">EchoMessage</span>
echo m <span class="fu">=</span> <span class="dt">EchoMessage</span> <span class="st">&quot;echo&quot;</span> (fromMaybe <span class="st">&quot;&quot;</span> m) <span class="fu">&lt;$&gt;</span> liftIO getCurrentTime
<span class="co">-- handle /echo/path</span>
<span class="ot">echoPath ::</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span> <span class="dt">EchoMessage</span>
echoPath <span class="fu">=</span> <span class="dt">EchoMessage</span> <span class="st">&quot;echo/path&quot;</span> <span class="fu">&lt;$&gt;</span> (T.pack <span class="fu">&lt;$&gt;</span> liftIO getCurrentDirectory) <span class="fu">&lt;*&gt;</span> liftIO getCurrentTime

<span class="ot">api ::</span> <span class="dt">Proxy</span> <span class="dt">Api</span>
api <span class="fu">=</span> <span class="dt">Proxy</span>

<span class="co">-- compose our server from handlers to satisfy the type of our API</span>
<span class="ot">server ::</span> <span class="dt">Server</span> <span class="dt">Api</span>
server <span class="fu">=</span> echoPath <span class="fu">:&lt;|&gt;</span> echoHello <span class="fu">:&lt;|&gt;</span> echo

<span class="ot">app ::</span> <span class="dt">Application</span>
app <span class="fu">=</span> serve api server

<span class="ot">runApp ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()
runApp port <span class="fu">=</span> run port app  <span class="co">-- run our</span></code></pre></div>
</section><section id="servant-isnt-just-for-services" class="slide level2">
<h1>Servant isn’t just for services</h1>
<ul>
<li class="fragment">Servant is not limited to only being a service</li>
<li class="fragment">You can use it to serve web pages</li>
<li class="fragment">You can use it to serve static content</li>
<li class="fragment">You can actually use any other WAI based server framework for part of your site</li>
<li class="fragment">You are left with the choice of how to compose what you want though
<ul>
<li class="fragment">HTLM templating - Blaze or Lucid</li>
<li class="fragment">Serve static files - Use servant or another WAI application</li>
<li class="fragment">etc …</li>
</ul></li>
</ul>
</section><section id="we-want-to-serve-our-client" class="slide level2">
<h1>We want to serve our client</h1>
<ul>
<li class="fragment">Single page web application - So skip HTML templating</li>
<li class="fragment">Serve only static files - Generated by client tool chain</li>
<li class="fragment">Serve dynamic JS for client settings</li>
</ul>
</section><section id="serving-up-the-client" class="slide level2">
<h1>Serving up the client</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell">           <span class="co">-- /settings.js - our dynamic JS giving settings back to the client</span>
<span class="kw">type</span> <span class="dt">Api</span> <span class="fu">=</span> <span class="st">&quot;settings.js&quot;</span> <span class="fu">:&gt;</span> <span class="dt">Get</span> <span class="ch">'[PlainText] Text</span>
           <span class="co">-- / - serve static files (must be last)</span>
         <span class="fu">:&lt;|&gt;</span> <span class="dt">Raw</span>

<span class="kw">data</span> <span class="dt">Settings</span> <span class="fu">=</span> <span class="dt">Settings</span>  <span class="co">-- The settings we communicate to the client</span>
  {<span class="ot"> port      ::</span> <span class="dt">Int</span>      <span class="co">-- The port we are running on, silly I know</span>
  ,<span class="ot"> host      ::</span> <span class="dt">Text</span>     <span class="co">-- The name of the host, silly I know</span>
  ,<span class="ot"> clientApp ::</span> <span class="dt">Text</span>     <span class="co">-- The function to execute on the client (actually useful)</span>
  } <span class="kw">deriving</span> (<span class="dt">Show</span>)

<span class="co">-- Our settings handler type actually differs from the standard Servant handler type - Servant is that flexible</span>
<span class="kw">type</span> <span class="dt">Handler</span> <span class="fu">=</span> <span class="dt">ReaderT</span> <span class="dt">Settings</span> (<span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span>)
<span class="ot">settings ::</span> <span class="dt">Handler</span> <span class="dt">Text</span>
settings <span class="fu">=</span> <span class="kw">do</span>
  <span class="dt">Settings</span> {<span class="fu">..</span>} <span class="ot">&lt;-</span> ask
  return <span class="fu">$</span> T.unlines [ <span class="st">&quot;SettingsETFWA = {};&quot;</span> , <span class="st">&quot;SettingsETFWA.port = &quot;</span> <span class="fu">&lt;&gt;</span> (T.pack <span class="fu">.</span> show <span class="fu">$</span> port) <span class="fu">&lt;&gt;</span> <span class="st">&quot;;&quot;</span> , <span class="st">&quot;SettingsETFWA.host = '&quot;</span> <span class="fu">&lt;&gt;</span> host <span class="fu">&lt;&gt;</span> <span class="st">&quot;';&quot;</span> , <span class="st">&quot;SettingsETFWA.app = '&quot;</span> <span class="fu">&lt;&gt;</span> clientApp <span class="fu">&lt;&gt;</span> <span class="st">&quot;';&quot;</span> ]

<span class="co">-- Use built in servant handler to serve static content from the data folder</span>
<span class="ot">content ::</span> <span class="dt">Server</span> <span class="dt">Raw</span>
content <span class="fu">=</span> serveDirectory <span class="st">&quot;../data&quot;</span>

<span class="co">-- Natural transformation that lets our special handler be run by servant</span>
<span class="ot">handlerToServant ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Handler</span> <span class="fu">:~&gt;</span> <span class="dt">EitherT</span> <span class="dt">ServantErr</span> <span class="dt">IO</span>
handlerToServant <span class="fu">=</span> runReaderTNat

<span class="co">-- Construct the server</span>
<span class="ot">server ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Server</span> <span class="dt">Api</span>
server s <span class="fu">=</span> enter (handlerToServant s) settings  <span class="co">-- Lift our special handler to run alongside normal ones</span>
         <span class="fu">:&lt;|&gt;</span> content

<span class="ot">api ::</span> <span class="dt">Proxy</span> <span class="dt">Api</span>
api <span class="fu">=</span> <span class="dt">Proxy</span>

<span class="ot">app ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Application</span>
app s <span class="fu">=</span> serve api (server s)

<span class="ot">runApp ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()
runApp port <span class="fu">=</span> run port (app <span class="dt">Settings</span>{port <span class="fu">=</span> port, host <span class="fu">=</span> <span class="st">&quot;localhost&quot;</span>, clientApp <span class="fu">=</span> <span class="st">&quot;CounterExample&quot;</span>})</code></pre></div>
</section><section id="serve-the-client-and-echo-his-requests" class="slide level2">
<h1>Serve the client and echo his requests</h1>
<ul>
<li class="fragment">I want to serve the client and echo his request</li>
<li class="fragment">Do I have to rewrite my servers</li>
<li class="fragment">No I can just compose them</li>
</ul>
</section><section id="echoing-our-served-client" class="slide level2">
<h1>Echoing our served client</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="co">-- Import our two servers</span>
<span class="kw">import qualified</span> <span class="dt">Client</span>
<span class="kw">import qualified</span> <span class="dt">Echo</span>

<span class="co">-- Our API is the composition of the two other APIs</span>
<span class="kw">type</span> <span class="dt">Api</span> <span class="fu">=</span> <span class="dt">Echo.Api</span>
         <span class="fu">:&lt;|&gt;</span> <span class="dt">Client.Api</span>

<span class="co">-- Our server is the composition of the two servers</span>
<span class="ot">server ::</span> <span class="dt">Client.Settings</span> <span class="ot">-&gt;</span> <span class="dt">Server</span> <span class="dt">Api</span>
server s <span class="fu">=</span> Echo.server
         <span class="fu">:&lt;|&gt;</span> Client.server s

<span class="ot">api ::</span> <span class="dt">Proxy</span> <span class="dt">Api</span>
api <span class="fu">=</span> <span class="dt">Proxy</span>

<span class="ot">app ::</span> <span class="dt">Client.Settings</span> <span class="ot">-&gt;</span> <span class="dt">Application</span>
app s <span class="fu">=</span> serve api (server s)

<span class="ot">runApp ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()
runApp port clientApp <span class="fu">=</span> run port (app <span class="dt">Client.Settings</span>{Client.port <span class="fu">=</span> port, Client.host <span class="fu">=</span> <span class="st">&quot;localhost&quot;</span>, Client.clientApp <span class="fu">=</span> clientApp})</code></pre></div>
</section></section>
<section><section id="client" class="titleslide slide level1"><h1>Client</h1></section><section id="getting-started-1" class="slide level2">
<h1>Getting Started</h1>
<ul>
<li class="fragment">Surprisingly more involved than the server but not too bad.</li>
<li class="fragment">Install latest version of PureScript compiler
<ul>
<li class="fragment"><code>cabal fetch purescript-0.7.6.1 &amp;&amp; cd purescript-0.7.6.1 &amp;&amp; stack install</code></li>
</ul></li>
<li class="fragment">Install NodeJs and NPM</li>
<li class="fragment">Initialize NPM and install your dev dependencies
<ul>
<li class="fragment"><code>npm init</code></li>
<li class="fragment"><code>npm install webpack css-loader html-webpack-plugin style-loader --save-dev</code></li>
<li class="fragment"><code>npm install webpack-dev-server purs-loader@0.4.0 virtual-dom --save-dev</code></li>
</ul></li>
<li class="fragment">Install pulp to manage PureScript packages only
<ul>
<li class="fragment"><code>npm install -g pulp</code></li>
</ul></li>
<li class="fragment">Initialize your directory for PureScript and install libraries
<ul>
<li class="fragment"><code>pulp init</code></li>
<li class="fragment"><code>pulp dep install purescript-console purescript-lists purescript-halogen purescript-affjax --save</code></li>
<li class="fragment"><code>pulp dep install purescript-tuples purescript-debug purescript-routing --save</code></li>
</ul></li>
<li class="fragment">Install virtual-dom needed by halogen - <code>npm install virtual-dom --save</code></li>
<li class="fragment">Setup our webpack configuration file</li>
</ul>
</section><section id="webpack-1" class="slide level2">
<h1>Webpack</h1>
<ul>
<li class="fragment">Webpack is going to look at some JS file</li>
<li class="fragment">It will follow all <code>require()</code>s that it sees and compile them into one <code>bundle.js</code></li>
<li class="fragment">The types of things can be include are based on the loaders
<ul>
<li class="fragment">purs-loader to load purescript</li>
<li class="fragment">css-loader to load css files</li>
<li class="fragment">many more</li>
</ul></li>
<li class="fragment">Plugin that will automatically generate your <code>index.html</code></li>
<li class="fragment">Plugin that will run a dev server recompiling whenever changes are detected</li>
<li class="fragment">Plugin that will hot swap your code whenever it recompiles</li>
<li class="fragment">Gives you rapid feedback when doing frontend work</li>
<li class="fragment">You will need CORS when using webpack-dev-server with your actual server</li>
</ul>
</section><section id="our-js-webpack-entry-point" class="slide level2">
<h1>Our JS Webpack Entry point</h1>
<div class="sourceCode"><pre class="sourceCode stretch javascript"><code class="sourceCode javascript"><span class="at">require</span>(<span class="st">'./main.css'</span>)<span class="op">;</span>  <span class="co">// here we include CSS</span>

<span class="kw">var</span> settings <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./settings&quot;</span>)<span class="op">;</span>  <span class="co">// here we include our seetins.js file</span>
<span class="co">// Depending on our settings we include different purescript apps and run them</span>
<span class="cf">if</span> (<span class="va">settings</span>.<span class="at">app</span> <span class="op">===</span> <span class="st">'RoutesExample'</span>)
<span class="op">{</span>
    <span class="kw">var</span> app <span class="op">=</span> <span class="at">require</span>(<span class="st">'./RoutesExample.purs'</span>)<span class="op">;</span>
    <span class="va">app</span>.<span class="at">runApp</span>()<span class="op">;</span>
<span class="op">}</span>
<span class="cf">else</span> <span class="cf">if</span> (<span class="va">settings</span>.<span class="at">app</span> <span class="op">===</span> <span class="st">'EchoOnly'</span>)
<span class="op">{</span>
    <span class="kw">var</span> app <span class="op">=</span> <span class="at">require</span>(<span class="st">'./EchoOnly.purs'</span>)<span class="op">;</span>
    <span class="va">app</span>.<span class="at">runApp</span>()<span class="op">;</span>
<span class="op">}</span>
<span class="cf">else</span> <span class="cf">if</span> (<span class="va">settings</span>.<span class="at">app</span> <span class="op">===</span> <span class="st">'CounterExample'</span>)
<span class="op">{</span>
    <span class="kw">var</span> app <span class="op">=</span> <span class="at">require</span>(<span class="st">'./CounterExample.purs'</span>)<span class="op">;</span>
    <span class="va">app</span>.<span class="at">runApp</span>()<span class="op">;</span>
<span class="op">}</span>
<span class="cf">else</span>
<span class="op">{</span>
  <span class="va">console</span>.<span class="at">error</span>(<span class="st">&quot;blah&quot;</span>)<span class="op">;</span>
<span class="op">}</span></code></pre></div>
</section><section id="halogen" class="slide level2">
<h1>Halogen</h1>
<ul>
<li class="fragment">Its a declarative UI framework</li>
<li class="fragment">It is component based</li>
<li class="fragment">It is basically MVC’ish</li>
<li class="fragment">You have a hierarchy of components</li>
<li class="fragment">Each component sort of has
<ul>
<li class="fragment">Its model / state</li>
<li class="fragment">A query algebra that specifies ways the model can change / requests on the model</li>
<li class="fragment">A function that update the model given queries</li>
<li class="fragment">A function that renders the model and may generate asynchronous queries</li>
</ul></li>
<li class="fragment">Parents in the hierarchy can
<ul>
<li class="fragment">Do requests on their children using their query algebras</li>
<li class="fragment">Peek at any of their children’s queries after they handled them</li>
<li class="fragment">Information flow is one way only - Parent to child</li>
</ul></li>
</ul>
</section><section id="halogen-1" class="slide level2">
<h1>Halogen</h1>
<ul>
<li class="fragment">It has some scary types</li>
<li class="fragment">But it has good tutorials</li>
<li class="fragment">The types will guide you</li>
<li class="fragment">I think it is commercially used - SlamData</li>
</ul>
</section><section id="from-the-their-tutorial" class="slide level2">
<h1>From the their tutorial</h1>
<p>From https://github.com/slamdata/purescript-halogen</p>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="co">-- | The state of the component</span>
<span class="kw">type</span> <span class="dt">State</span> <span class="fu">=</span> {<span class="ot"> on ::</span> <span class="dt">Boolean</span> }

<span class="co">-- | The query algebra for the component</span>
<span class="kw">data</span> <span class="dt">Query</span> a
  <span class="fu">=</span> <span class="dt">ToggleState</span> a
  <span class="fu">|</span> <span class="dt">GetState</span> (<span class="dt">Boolean</span> <span class="ot">-&gt;</span> a)

<span class="co">-- | The component definition</span>
<span class="ot">myComponent ::</span> forall g<span class="fu">.</span> (<span class="dt">Functor</span> g) <span class="ot">=&gt;</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> g
myComponent <span class="fu">=</span> component render eval
  <span class="kw">where</span>

<span class="ot">  render ::</span> <span class="dt">State</span> <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> <span class="dt">Query</span>
  render state <span class="fu">=</span>
    H.div_
      [ H.h1_
          [ H.text <span class="st">&quot;Toggle Button&quot;</span> ]
      , H.button
          [ E.onClick (E.input_ <span class="dt">ToggleState</span>) ]
          [ H.text (<span class="kw">if</span> state<span class="fu">.</span>on <span class="kw">then</span> <span class="st">&quot;On&quot;</span> <span class="kw">else</span> <span class="st">&quot;Off&quot;</span>) ]
      ]

<span class="ot">  eval ::</span> <span class="dt">Natural</span> <span class="dt">Query</span> (<span class="dt">ComponentDSL</span> <span class="dt">State</span> <span class="dt">Query</span> g)
  eval (<span class="dt">ToggleState</span> next) <span class="fu">=</span> <span class="kw">do</span>
    modify (\state <span class="ot">-&gt;</span> { on<span class="fu">:</span> not state<span class="fu">.</span>on })
    pure next
  eval (<span class="dt">GetState</span> continue) <span class="fu">=</span> <span class="kw">do</span>
    value <span class="ot">&lt;-</span> gets _<span class="fu">.</span>on
    pure (continue value)</code></pre></div>
</section><section id="from-the-their-tutorial-1" class="slide level2">
<h1>From the their tutorial</h1>
<p>From https://github.com/slamdata/purescript-halogen</p>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="ot">component ::</span> forall s f g<span class="fu">.</span> <span class="dt">Render</span> s f <span class="ot">-&gt;</span> <span class="dt">Eval</span> f s f g <span class="ot">-&gt;</span> <span class="dt">Component</span> s f g</code></pre></div>
<ul>
<li class="fragment">s is the component’s state.</li>
<li class="fragment">f is the component’s query algebra.</li>
<li class="fragment">g is a functor integrated into the component’s query algebra that allows embedding of external DSLs or handling of effects</li>
</ul>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="kw">type</span> <span class="dt">Render</span> s f <span class="fu">=</span> s <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> f
<span class="kw">type</span> <span class="dt">ComponentHTML</span> f <span class="fu">=</span> <span class="dt">HTML</span> <span class="dt">Void</span> (f <span class="dt">Unit</span>)</code></pre></div>
<ul>
<li class="fragment">A render function takes the component’s current state value and returns a value constructed using Halogen’s type safe HTML DSL, with the ability for elements in the rendered HTML to send actions back to the component, using the query algebra f.</li>
</ul>
</section><section id="the-counter-example" class="slide level2">
<h1>The counter example</h1>
<p>From https://github.com/slamdata/purescript-halogen</p>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="kw">newtype</span> <span class="dt">State</span> <span class="fu">=</span> <span class="dt">State</span> <span class="dt">Int</span>

<span class="ot">initialState ::</span> <span class="dt">State</span>
initialState <span class="fu">=</span> <span class="dt">State</span> <span class="dv">0</span>

<span class="kw">data</span> <span class="dt">Query</span> a <span class="fu">=</span> <span class="dt">Tick</span> a

<span class="ot">ui ::</span> forall g<span class="fu">.</span> (<span class="dt">Functor</span> g) <span class="ot">=&gt;</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> g
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>
<span class="ot">  render ::</span> <span class="dt">State</span> <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> <span class="dt">Query</span>
  render (<span class="dt">State</span> n) <span class="fu">=</span>
    H.div_
      [ H.h1
          [ P.id_ <span class="st">&quot;header&quot;</span> ]
          [ H.text <span class="st">&quot;counter&quot;</span> ]
      , H.p_
          [ H.text (show n) ]
      ]

<span class="ot">  eval ::</span> <span class="dt">Natural</span> <span class="dt">Query</span> (<span class="dt">ComponentDSL</span> <span class="dt">State</span> <span class="dt">Query</span> g)
  eval (<span class="dt">Tick</span> next) <span class="fu">=</span> <span class="kw">do</span>
    modify (\(<span class="dt">State</span> n) <span class="ot">-&gt;</span> <span class="dt">State</span> (n <span class="fu">+</span> <span class="dv">1</span>))
    pure next

<span class="co">-- | Run the app</span>
<span class="ot">runApp ::</span> <span class="dt">Eff</span> (<span class="dt">HalogenEffects</span> ()) <span class="dt">Unit</span>
runApp <span class="fu">=</span> runAff throwException (const (pure unit)) <span class="fu">$</span> <span class="kw">do</span>
  { node<span class="fu">:</span> node, driver<span class="fu">:</span> driver } <span class="ot">&lt;-</span> runUI ui initialState
  onLoad <span class="fu">$</span> appendToBody node
  setInterval <span class="dv">1000</span> <span class="fu">$</span> driver (action <span class="dt">Tick</span>)

<span class="ot">setInterval ::</span> forall e a<span class="fu">.</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Aff</span> e a <span class="ot">-&gt;</span> <span class="dt">Aff</span> e <span class="dt">Unit</span>
setInterval ms a <span class="fu">=</span> later' ms <span class="fu">$</span> a <span class="fu">*&gt;</span> setInterval ms a</code></pre></div>
</section><section id="echo-client" class="slide level2">
<h1>Echo Client</h1>
<ul>
<li class="fragment">For the GUI
<ul>
<li class="fragment">Select kind of echo end point to query</li>
<li class="fragment">Input message if needed</li>
<li class="fragment">Display returned echoed message</li>
</ul></li>
<li class="fragment">Need to do XHR request to server</li>
<li class="fragment">Need to decode the response</li>
</ul>
</section><section id="echo-client-state" class="slide level2">
<h1>Echo Client State</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="kw">type</span> <span class="dt">EchoResponse</span> <span class="fu">=</span>
  {<span class="ot"> path      ::</span> <span class="dt">String</span>
  ,<span class="ot"> message   ::</span> <span class="dt">String</span>
  ,<span class="ot"> timeStamp ::</span> <span class="dt">String</span>
  }
<span class="kw">data</span> <span class="dt">MessageType</span>
  <span class="fu">=</span> <span class="dt">HelloMessage</span> {<span class="ot">message ::</span> <span class="dt">String</span>,<span class="ot"> response ::</span> <span class="dt">Maybe</span> <span class="dt">EchoResponse</span>}
  <span class="fu">|</span> <span class="dt">EchoMessage</span> {<span class="ot">message ::</span> <span class="dt">String</span>,<span class="ot"> response ::</span> <span class="dt">Maybe</span> <span class="dt">EchoResponse</span>}
  <span class="fu">|</span> <span class="dt">PathMessage</span> {<span class="ot">response ::</span> <span class="dt">Maybe</span> <span class="dt">EchoResponse</span>}

<span class="kw">type</span> <span class="dt">State</span> <span class="fu">=</span> <span class="dt">MessageType</span></code></pre></div>
</section><section id="query-algebra-and-effects" class="slide level2">
<h1>Query Algebra and Effects</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"> <span class="co">-- The type of effects we can use</span>
<span class="kw">type</span> <span class="dt">Effects</span> eff <span class="fu">=</span> <span class="dt">HalogenEffects</span> (<span class="ot">console ::</span> <span class="dt">CONSOLE</span>,<span class="ot"> ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff)
<span class="co">-- Our query algebra (ways changes can be triggered)</span>
<span class="kw">data</span> <span class="dt">Query</span> a 
  <span class="fu">=</span> <span class="dt">SelectHello</span> a
  <span class="fu">|</span> <span class="dt">SelectEcho</span> a
  <span class="fu">|</span> <span class="dt">SelectPath</span> a
  <span class="fu">|</span> <span class="dt">SetHello</span> <span class="dt">String</span> a
  <span class="fu">|</span> <span class="dt">SetEcho</span> <span class="dt">String</span> a
  <span class="fu">|</span> <span class="dt">SendHello</span> <span class="dt">State</span> a
  <span class="fu">|</span> <span class="dt">SendEcho</span> <span class="dt">State</span> a
  <span class="fu">|</span> <span class="dt">SendPath</span> <span class="dt">State</span> a</code></pre></div>
</section><section id="evaluate-the-query-algebra" class="slide level2">
<h1>Evaluate the query algebra</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="ot">ui ::</span> forall eff<span class="fu">.</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff))
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>
  <span class="co">-- .....</span>
  <span class="co">-- ....  leaving out some code</span>
<span class="ot">  eval ::</span> <span class="dt">Natural</span> <span class="dt">Query</span> (<span class="dt">ComponentDSL</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff)))
  eval (<span class="dt">SelectHello</span> next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> modify \_ <span class="ot">-&gt;</span> (<span class="dt">HelloMessage</span> {message<span class="fu">:</span> <span class="st">&quot;&quot;</span>, response<span class="fu">:</span> <span class="dt">Nothing</span>})
  eval (<span class="dt">SetHello</span> m next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> modify
    \state <span class="ot">-&gt;</span> <span class="kw">case</span> state <span class="kw">of</span>
      <span class="dt">HelloMessage</span> d <span class="ot">-&gt;</span> <span class="dt">HelloMessage</span> d{message<span class="fu">=</span>m, response<span class="fu">=</span><span class="dt">Nothing</span>}
      _ <span class="ot">-&gt;</span> state
  eval (<span class="dt">SendHello</span> s next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> <span class="kw">case</span> s <span class="kw">of</span>
    <span class="dt">HelloMessage</span> d <span class="ot">-&gt;</span> <span class="kw">do</span>
        r <span class="ot">&lt;-</span> liftAff' <span class="fu">$</span> sendHello d<span class="fu">.</span>message
        modify \_ <span class="ot">-&gt;</span> <span class="dt">HelloMessage</span> d{response <span class="fu">=</span> <span class="dt">Just</span> r}
    _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span>

  eval (<span class="dt">SelectEcho</span> next) <span class="fu">=</span> modify (\state <span class="ot">-&gt;</span> <span class="dt">EchoMessage</span> {message<span class="fu">:</span> <span class="st">&quot;&quot;</span>, response<span class="fu">:</span> <span class="dt">Nothing</span>}) <span class="fu">*&gt;</span> pure next
  eval (<span class="dt">SetEcho</span> m next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> modify
    \state <span class="ot">-&gt;</span> <span class="kw">case</span> state <span class="kw">of</span>
        <span class="dt">EchoMessage</span> d <span class="ot">-&gt;</span> <span class="dt">EchoMessage</span> d{message<span class="fu">=</span>m, response<span class="fu">=</span><span class="dt">Nothing</span>}
        _ <span class="ot">-&gt;</span> state
  eval (<span class="dt">SendEcho</span> s next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> <span class="kw">case</span> s <span class="kw">of</span>
    <span class="dt">EchoMessage</span> d <span class="ot">-&gt;</span> <span class="kw">do</span>
        r <span class="ot">&lt;-</span> liftAff' <span class="fu">$</span> sendEcho d<span class="fu">.</span>message
        modify \_ <span class="ot">-&gt;</span> <span class="dt">EchoMessage</span> d{response <span class="fu">=</span> <span class="dt">Just</span> r}
    _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span>

  eval (<span class="dt">SelectPath</span> next) <span class="fu">=</span> modify (\state <span class="ot">-&gt;</span> <span class="dt">PathMessage</span> {response<span class="fu">:</span> <span class="dt">Nothing</span>}) <span class="fu">*&gt;</span> pure next
  eval (<span class="dt">SendPath</span> s next) <span class="fu">=</span> pure next <span class="fu">&lt;*</span> <span class="kw">case</span> s <span class="kw">of</span>
    <span class="dt">PathMessage</span> d <span class="ot">-&gt;</span> <span class="kw">do</span>
        r <span class="ot">&lt;-</span> liftAff' <span class="fu">$</span> sendPath
        modify \_ <span class="ot">-&gt;</span> <span class="dt">PathMessage</span> d{response <span class="fu">=</span> <span class="dt">Just</span> r}
    _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span></code></pre></div>
</section><section id="do-the-ajax" class="slide level2">
<h1>Do the Ajax</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="kw">newtype</span> <span class="dt">EchoResponseR</span> <span class="fu">=</span> <span class="dt">EchoResponseR</span> <span class="dt">EchoResponse</span>
<span class="kw">instance</span><span class="ot"> respondableEchoResponseR ::</span> <span class="dt">Respondable</span> <span class="dt">EchoResponseR</span> <span class="kw">where</span>
  fromResponse r' <span class="fu">=</span> <span class="kw">do</span>
    r <span class="ot">&lt;-</span> read r' <span class="fu">&gt;&gt;=</span> readJSON
    p <span class="ot">&lt;-</span> readProp <span class="st">&quot;path&quot;</span> r
    m <span class="ot">&lt;-</span> readProp <span class="st">&quot;message&quot;</span> r
    t <span class="ot">&lt;-</span> readProp <span class="st">&quot;timeStamp&quot;</span> r
    pure <span class="fu">$</span> <span class="dt">EchoResponseR</span> {path<span class="fu">:</span> p, message<span class="fu">:</span> m, timeStamp<span class="fu">:</span> t}
  responseType <span class="fu">=</span> <span class="dt">Tuple</span> (<span class="dt">Just</span> applicationJSON) <span class="dt">JSONResponse</span>

<span class="ot">sendHello ::</span> forall eff<span class="fu">.</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Aff</span> (<span class="ot">ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff) <span class="dt">EchoResponse</span>
sendHello s <span class="fu">=</span>  Ajax.get (<span class="st">&quot;http://localhost:8086/echo/hello?message=&quot;</span> <span class="fu">++</span> s) <span class="fu">&lt;#&gt;</span> \a <span class="ot">-&gt;</span> <span class="kw">case</span> a<span class="fu">.</span>response <span class="kw">of</span> <span class="dt">EchoResponseR</span> r <span class="ot">-&gt;</span> r

<span class="ot">sendEcho ::</span> forall eff<span class="fu">.</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Aff</span> (<span class="ot">ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff) <span class="dt">EchoResponse</span>
sendEcho s <span class="fu">=</span>  Ajax.get (<span class="st">&quot;http://localhost:8086/echo?message=&quot;</span> <span class="fu">++</span> s) <span class="fu">&lt;#&gt;</span> \a <span class="ot">-&gt;</span> <span class="kw">case</span> a<span class="fu">.</span>response <span class="kw">of</span> <span class="dt">EchoResponseR</span> r <span class="ot">-&gt;</span> r

<span class="ot">sendPath ::</span> forall eff<span class="fu">.</span> <span class="dt">Aff</span> (<span class="ot">ajax ::</span> <span class="dt">Ajax.AJAX</span> <span class="fu">|</span> eff) <span class="dt">EchoResponse</span>
sendPath <span class="fu">=</span>  Ajax.get (<span class="st">&quot;http://localhost:8086/echo/path&quot;</span>) <span class="fu">&lt;#&gt;</span> \a <span class="ot">-&gt;</span> <span class="kw">case</span> a<span class="fu">.</span>response <span class="kw">of</span> <span class="dt">EchoResponseR</span> r <span class="ot">-&gt;</span> r</code></pre></div>
</section><section id="render-the-main-gui" class="slide level2">
<h1>Render the main GUI</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="ot">ui ::</span> forall eff<span class="fu">.</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff))
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>

<span class="ot">  render ::</span> <span class="dt">State</span> <span class="ot">-&gt;</span> <span class="dt">ComponentHTML</span> <span class="dt">Query</span>
  render s <span class="fu">=</span> <span class="kw">case</span> renderOption s <span class="kw">of</span>
      <span class="dt">Tuple</span> option child <span class="ot">-&gt;</span>
           H.div_
             [ H.select [E.onValueChange (E.input selectType)]
                 [ H.option [P.value <span class="st">&quot;Hello&quot;</span>, P.selected (option <span class="fu">==</span> <span class="st">&quot;Hello&quot;</span>)] [H.text <span class="st">&quot;Hello&quot;</span>]
                 , H.option [P.value <span class="st">&quot;Echo&quot;</span>, P.selected (option <span class="fu">==</span> <span class="st">&quot;Echo&quot;</span>)] [H.text <span class="st">&quot;Echo&quot;</span>]
                 , H.option [P.value <span class="st">&quot;Path&quot;</span>, P.selected (option <span class="fu">==</span> <span class="st">&quot;Path&quot;</span>)] [H.text <span class="st">&quot;Path&quot;</span>]
                 ]
             , child
             ]
      _ <span class="ot">-&gt;</span> unsafeThrow <span class="st">&quot;Never&quot;</span>

  selectType s
     <span class="fu">|</span> s <span class="fu">==</span> <span class="st">&quot;Hello&quot;</span> <span class="fu">=</span> <span class="dt">SelectHello</span>
     <span class="fu">|</span> s <span class="fu">==</span> <span class="st">&quot;Echo&quot;</span> <span class="fu">=</span> <span class="dt">SelectEcho</span>
     <span class="fu">|</span> s <span class="fu">==</span> <span class="st">&quot;Path&quot;</span> <span class="fu">=</span> <span class="dt">SelectPath</span>
  <span class="co">-- ...</span>
  <span class="co">-- ... leaving out some code</span></code></pre></div>
</section><section id="rendering-message-guis" class="slide level2">
<h1>Rendering message GUIs</h1>
<div class="sourceCode"><pre class="sourceCode stretch haskell"><code class="sourceCode haskell"><span class="ot">ui ::</span> forall eff<span class="fu">.</span> <span class="dt">Component</span> <span class="dt">State</span> <span class="dt">Query</span> (<span class="dt">Aff</span> (<span class="dt">Effects</span> eff))
ui <span class="fu">=</span> component render eval
  <span class="kw">where</span>
  <span class="co">-- ...</span>
  <span class="co">-- ... leaving out some code</span>
  renderOption s <span class="fu">=</span> <span class="kw">case</span> s <span class="kw">of</span>
     <span class="dt">HelloMessage</span> {message<span class="fu">:</span> m, response<span class="fu">:</span> r} <span class="ot">-&gt;</span> <span class="dt">Tuple</span> <span class="st">&quot;Hello&quot;</span> <span class="fu">$</span> H.div_
        [ H.div_
            [ H.label_ [H.text <span class="st">&quot;message&quot;</span>]
            , H.input [P.inputType <span class="dt">P.InputText</span>, E.onValueChange (E.input <span class="dt">SetHello</span>)]
            ]
        , H.div_
            [ H.label_ [H.text (<span class="st">&quot;Hello response was:&quot;</span> <span class="fu">++</span> fromMaybe <span class="st">&quot;&quot;</span> (_<span class="fu">.</span>message <span class="fu">&lt;$&gt;</span> r))]
            ]
        , H.div_
            [ H.button [E.onClick (E.input_ <span class="fu">$</span> <span class="dt">SendHello</span> s)] [H.text <span class="st">&quot;echo friendly&quot;</span>]
            ]
        ]
     <span class="dt">EchoMessage</span> {message<span class="fu">:</span> m, response<span class="fu">:</span> r} <span class="ot">-&gt;</span> <span class="dt">Tuple</span> <span class="st">&quot;Echo&quot;</span> <span class="fu">$</span> H.div_
        [ H.div_
            [ H.label_ [H.text <span class="st">&quot;message&quot;</span>]
            , H.input [P.inputType <span class="dt">P.InputText</span>, E.onValueChange (E.input <span class="dt">SetEcho</span>)]
            ]
        , H.div_
            [ H.label_ [H.text (<span class="st">&quot;Response was:&quot;</span> <span class="fu">++</span> fromMaybe <span class="st">&quot;&quot;</span> (_<span class="fu">.</span>message <span class="fu">&lt;$&gt;</span> r))]
            ]
        , H.div_
            [ H.button [E.onClick (E.input_ <span class="fu">$</span> <span class="dt">SendEcho</span> s)] [H.text <span class="st">&quot;echo&quot;</span>]
            ]
        ]
     <span class="dt">PathMessage</span> {response<span class="fu">:</span> r} <span class="ot">-&gt;</span> <span class="dt">Tuple</span> <span class="st">&quot;Path&quot;</span> <span class="fu">$</span> H.div_
        [ H.div_
            [ H.label_ [H.text (<span class="st">&quot;Server path is:&quot;</span> <span class="fu">++</span> fromMaybe <span class="st">&quot;&quot;</span> (_<span class="fu">.</span>message <span class="fu">&lt;$&gt;</span> r))]
            ]
        , H.div_
            [ H.button [E.onClick (E.input_ <span class="fu">$</span> <span class="dt">SendPath</span> s)] [H.text <span class="st">&quot;request path&quot;</span>]
            ]
        ]</code></pre></div>
</section></section>
<section><section id="wrap-up" class="titleslide slide level1"><h1>Wrap up</h1></section><section id="my-feelings" class="slide level2">
<h1>My feelings</h1>
<ul>
<li class="fragment">Server
<ul>
<li class="fragment">Can’t go wrong with Haskell</li>
<li class="fragment">Servant is amazing</li>
</ul></li>
<li class="fragment">Client
<ul>
<li class="fragment">Webpack really impressed me</li>
<li class="fragment">PureScript not sure yet</li>
<li class="fragment">Halogen not sure yet</li>
</ul></li>
</ul>
</section><section id="my-feelings---purescript" class="slide level2">
<h1>My feelings - PureScript</h1>
<p>Generally positive</p>
<ul>
<li class="fragment">Its not Haskell ✗
<ul>
<li class="fragment">Miss the compiler</li>
<li class="fragment">Miss my tools</li>
<li class="fragment">Miss some of my constructs</li>
</ul></li>
<li class="fragment">Similar philosophy to Haskell ✓</li>
<li class="fragment">Integrates easier on the browser ✓</li>
<li class="fragment">Looks like its got momentum ✓</li>
<li class="fragment">API search tool Pursuit is cool ✓</li>
</ul>
</section><section id="my-feelings---halogen" class="slide level2">
<h1>My feelings - Halogen</h1>
<p>Generally positive</p>
<ul>
<li class="fragment">Need to use it more for something bigger</li>
<li class="fragment">Special types for parent child relationships ✗</li>
<li class="fragment">Seems to have some commercial backing / users ✓</li>
<li class="fragment">Seems to have user buy in ✓</li>
</ul>
</section><section id="some-links" class="slide level2">
<h1>Some links</h1>
<ul>
<li class="fragment">SurviveJs is a good guide for front end WebDev (good section on WebPack) <a href>https://survivejs.com/</a></li>
<li class="fragment">Documentation and example for PureScript loader <a href>https://github.com/ethul/purs-loader</a></li>
<li class="fragment">Documentation and examples for Halogen <a href>https://github.com/slamdata/purescript-halogen</a></li>
<li class="fragment">A guide to use purescript-routing with purescript-halogen <a href>http://www.parsonsmatt.org/programming/2015/10/22/purescript_router.html</a></li>
<li class="fragment">The PureScript book <a href>https://leanpub.com/purescript/read</a></li>
<li class="fragment">The Pursuit search engine <a href>http://pursuit.purescript.org/</a></li>
</ul>
</section><section id="end" class="slide level2">
<h1>END</h1>
</section></section>
			</div>
		</div>

		<script src="../lib/js/head.min.js"></script>
		<script src="../js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'convex', // none/fade/slide/convex/concave/zoom
				// The "normal" size of the presentation, aspect ratio will be preserved
				// when the presentation is scaled to fit different resolutions. Can be
				// specified using percentage units.
				// width: 1160,
				// height: 720,
				width: 1920,
				height: 1080,
				// Factor of the display size that should remain empty around the content
				margin: 0.01,

				// Bounds for smallest/largest possible scale to apply to content
				minScale: 0.05,
				maxScale: 1.5,

				// Optional reveal.js plugins
				dependencies: [
					{ src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
